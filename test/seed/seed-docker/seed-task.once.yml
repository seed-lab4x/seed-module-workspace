# code: language=ansible
---

- name: seed-task.mock|fact redirect
  vars:
    redirect:
      - search: seed-docker/docker-volume.add.yml
        replace: ../seed-docker/docker-volumes.add/docker-volume.add.yml
      - search: seed-docker/docker-volume.push.yml
        replace: ../seed-docker/docker-volumes.push/docker-volume.push.yml
      - search: seed-docker/docker-network.add.yml
        replace: ../seed-docker/docker-networks.add/docker-network.add.yml
  ansible.builtin.set_fact:
    _task_share:
      run_once: "{{ task_share.run_once }}"
      task: "{{ redirect | selectattr('search','equalto',task_share.task) | map(attribute='replace') | first }}"

- include_tasks: ../seed-task.once/seed-task.test.yml
  vars:
    task_share: "{{ _task_share }}"
